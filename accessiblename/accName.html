<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
<title>Accessible Name and Description: Computation and API Mappings 1.1</title>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<!-- <script src="js/jquery-1.9.0.min.js"></script> -->
<script src="https://www.w3.org/Tools/respec/respec-w3c-common" class="remove"></script>
<script src="../implementation/js/resolveReferences.js" class="remove"></script>
<link href="http://www.w3.org/StyleSheets/TR/W3C-ED" rel="stylesheet" type="text/css"/>
<link href="../implementation/spec.css" rel="stylesheet" type="text/css"/>

<script class="remove">
  var respecConfig = {
    includePermalinks: true,
    
    // specification status (e.g., WD, LC, NOTE, etc.). If in doubt use ED.
    specStatus:           "ED",
    //crEnd:                "2012-04-30",
    //perEnd:               "2013-07-23",
    //publishDate:           "2013-08-22",
    diffTool:             "http://www.aptest.com/standards/htmldiff/htmldiff.pl",

    // the specifications short name, as in http://www.w3.org/TR/short-name/
    shortName:            "accname-aam-1.1",
          
    // if you wish the publication date to be other than today, set this
    // publishDate:  "2009-08-06",
    copyrightStart:  "2014",

    // if there is a previously published draft, uncomment this and set its YYYY-MM-DD date
    // and its maturity status
    //previousPublishDate:  "2014-03-20",
    //previousMaturity:     "REC",
    prevRecURI:           "http://www.w3.org/TR/2014/REC-wai-aria-implementation-20140320/",
    previousDiffURI:      "http://www.w3.org/TR/2014/REC-wai-aria-implementation-20140320/",

    // if there a publicly available Editors Draft, this is the link
    edDraftURI:           "http://rawgit.com/w3c/aria/master/accNameAndDescription/accName.html",

    // if this is a LCWD, uncomment and set the end of its review period
    // lcEnd: "2012-02-21",

    // editors, add as many as you like
    // only "name" is required
    editors:  [
        { name: "Joseph Scheuhammer",
          company: "Inclusive Design Research Centre, OCAD University",
          companyURI:"http://idrc.ocad.ca"
        },
        { name: "James Craig",
          url: 'http://www.apple.com',
				  mailto: "jcraig@apple.com",
				  company: "Apple Inc.", 
				  companyURI: "http://www.apple.com"
        },
        { name: "Andi Snow-Weaver (until December 2012)",
          company: "IBM",
          companyURI: "http://www.ibm.com"
        },
        { name: "Aaron Leventhal (until January 2009)",
          company: "IBM",
          companyURI: "http://www.ibm.com" },
    ],
    // authors, add as many as you like. 
    // This is optional, uncomment if you have authors as well as editors.
    // only "name" is required. Same format as editors.

    //authors:  [
    //    { name: "Your Name", url: "http://example.org/",
    //      company: "Your Company", companyURI: "http://example.com/" },
    //],

	/*
    alternateFormats: [
          { uri: 'aria-implementation-diff.html',
            label: "Diff from Previous Recommendation" } ,
          { uri: 'aria-implementation.ps',
            label: "PostScript version" },
          { uri: 'aria-implementation.pdf',
            label: "PDF version" }
    ],
    */
    
    // Working group info
    wg:           "Protocols and Formats Working Group",
    wgURI:        "http://www.w3.org/WAI/PF/",
    wgPublicList: "public-pfwg-comments",

    // URI of the patent status for this WG, for Rec-track documents
    // !!!! IMPORTANT !!!!
    // This is important for Rec-track documents, do not copy a patent URI from a random
    // document unless you know what you're doing. If in doubt ask your friendly neighbourhood
    // Team Contact.
    wgPatentURI:  "http://www.w3.org/2004/01/pp-impl/32212/status",
    
    tocIntroductory: true,
    //maxTocLevel: 4,
    
    // Spec URLs
    ariaSpecURLs: {
      "ED": "http://rawgithub.com/w3c/aria/master/spec/aria.html",
      "WD" : "http://www.w3.org/TR/wai-aria-1.1/",
      "FPWD": "http://www.w3.org/TR/wai-aria-1.1/",
      "REC": "http://www.w3.org/TR/wai-aria/"
    },
    
    localBiblio: {
      "WAI-ARIA": {
        "title": "Accessible Rich Internet Applications (WAI-ARIA) 1.1",
        "href": "http://www.w3.org/TR/wai-aria-1.1/",
        "status": "WD",
        "publisher": "W3C",
        "authors": [
          "James Craig",
          "Michael Cooper",
          "Shane McCarron"
        ],
        "etAl": true,
        "deliveredBy": [
          "http://www.w3.org/WAI/PF/"
        ]
      },
      "WAI-ARIA-10": {
        "authors": [
          "James Craig",
          "Michael Cooper"
        ],
        "etAl": true,
        "href": "http://www.w3.org/TR/wai-aria/",
        "title": "Accessible Rich Internet Applications (WAI-ARIA) 1.0",
        "status": "REC",
        "publisher": "W3C",
        "deliveredBy": [
          "http://www.w3.org/WAI/PF/"
        ]
      },
      "CORE-AAM": {
        "title": "Core Accessibility API Mappings 1.1",
        "href": "http://www.w3.org/TR/core-aam-1.1/",
        "status": "WD",
        "publisher": "W3C",
        "authors": [
          "Joseph Scheuhammer",
          "Michael Cooper",
          "Andi Snow-Weaver",
          "Aaron Leventhal"
        ],
        "etAl": true,
        "deliveredBy": [
          "http://www.w3.org/WAI/PF/"
        ]
      },
      // Correct reference for ATK
      "ATK": {
        "href": "https://developer.gnome.org/atk/stable/",
        "title": "ATK - Accessibility Toolkit",
        "publisher": "The GNOME Project"
      },
      // Custom reference for UIA Express (not available from SpecRef biblio).
      "UIA-EXPRESS": {
        "href": "http://msdn.microsoft.com/en-us/library/windows/desktop/dd561898%28v=vs.85%29.aspx",
        "title": "The IAccessibleEx Interface",
        "publisher": "Microsoft Corporation"
      }
    },
    preProcess: [ linkCrossReferences ]
  }
</script>
</head>
<body>
<section id="abstract">
	<p>This document describes how <a class="termref" title="user agent">user agents</a> determine <a class="termref" title="accessible name">names</a> and <a class="termref" title="accessible description">descriptions</a> of <a class="termref" title="accessible object">accessible objects</a> from web content languages and expose them in <a class="termref" title="accessibility api">accessibility <abbr title="Application Programming Interfaces">APIs</abbr></a>. This allows <a class="termref" title="assistive technologies">assistive technologies</a> to associate and relay the name or description of objects to users. Documenting the algorithm and mappings promotes interoperable exposure of these properties and events as implemented by different accessibility APIs, and helps to ensure that this information appears in a manner consistent with author intent. </p>
	<p>The accessible name and description computation and mappings specification defines support that applies across multiple content technologies, including  mapping of general-purpose <a class="termref" title="role">roles</a>, <a class="termref" title="state">states</a>, and <a class="termref" title="property">properties</a> provided in Web content via <cite><a href="http://www.w3.org/TR/wai-aria-1.1/"><abbr title="Accessible Rich Internet Applications">WAI-ARIA</abbr></a></cite> [[!WAI-ARIA]] and documented in <cite><a href="http://www.w3.org/TR/core-aam-1.1/"><abbr title="Core Accessibility API Mappings 1.1">CORE-AAM</abbr></a></cite> [[!CORE-AAM]]. Other Accessibility API Mappings specifications depend on and extend this specification for specific technologies, including native techology features and WAI-ARIA extensions.  </p>
	<p>This document updates and will eventually supercede the guidance in the <a href="http://www.w3.org/TR/wai-aria-implementation/">WAI-ARIA 1.0 User Agent Implementation Guide</a> [[!WAI-ARIA-IMPLEMENTATION]] W3C Recommendation. It is part of the <abbr title="Accessible Rich Internet Applications">WAI-ARIA</abbr> suite described in the <a href="http://www.w3.org/WAI/intro/aria.php"><abbr title="Accessible Rich Internet Application">WAI-ARIA</abbr> Overview</a>.</p>
</section>
<section id="sotd">
			<p>This is an Editor's Draft of the Protocols and Formats Working Group. It is not stable and may change at any time. Implementers should not use this for anything other than experimental implementations.</p>
</section>
<section id="intro">
	<h2>Introduction</h2>
      <p>This section is <a class="termref">informative</a>.</p>
      <p><a class="termref" title="user agent">User agents</a> acquire information from the <abbr title="Document Object Model">DOM</abbr> and create a parallel structure called the <a class="termref">accessibility tree</a>, made up of <a class="termref" title="accessible object">accessible objects</a>.  The structure of an accessible object includes its <a class="termref">role</a>, <a class="termref" title="state">states</a>, and <a class="termref" title="property">properties</a>.  An example of these three aspects is an accesible object whose role is <code>menuitem</code>, is currently in an <code>enabled</code> state, with a <code>haspopup</code> property (indicating that it leads to a sub-menu).  </p>
      <p>The two properties of accessible objects described in this document are its <a class="termref">accessible name</a> and <a class="termref">accessible description</a>.  The name is a short label that provides information about the purpose of the object.  Keeping with the menuitem example above, an example of an accesible name is <code>New</code>, indicating that the menu item allows for the creation of new documents, windows, and so on.  </p>
      <p>The description is a longer string that provides a short explanation that furthers understanding of the nature of the accessible object.  It is not always necessary to provide a description  if the name is sufficient, but it can help a user better understand the use of the object.</p>
      <p><a class="termref" title="accessibility api">Accessibility <abbr title="Application Programming Interfaces">APIs</abbr></a> currently support flat, unstructured strings for accessible names and desriptions.  The result of the name/description computation is thus a flat string. </p>      
      <p>The terms "accessible name" and "accessible description" are used to emphasize that they are properties of <a class="termref" title="accessible object">accessible objects</a> as exposed by <a class="termref" title="accessibility api">Accessibility <abbr title="Application Programming Interfaces">APIs</abbr></a>.  However, they are frequently referred to hereafter as simply "name" and "description".
</section>
<section id="normative" class="normative">
	<h2>Normative User Agent Implementation Requirements for <abbr title="Accessible Rich Internet Applications">WAI-ARIA</abbr></h2>
	<p>This section is <a class="termref">normative</a>.</p>
	<p>This specification indicates whether a section is <a class="termref">normative</a> or <a class="termref">informative</a> and the classification applies to the entire section. A statement "This section is normative" or "This section is informative" applies to all sub-sections of that section.</p>
	<p>Normative sections provide requirements that <a class="termref" title="user agent">user agents</a> must follow for an implementation to conform to this specification. The keywords MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, SHOULD, RECOMMENDED, MAY, and OPTIONAL in this document are to be interpreted as described in <cite><a href="http://www.rfc-editor.org/rfc/rfc2119.txt">Keywords for use in RFCs to indicate requirement levels</a></cite> [[!RFC2119]]. RFC-2119 keywords are formatted in uppercase and contained in a <code>strong</code> element with <code>class="rfc2119"</code>. When the keywords shown above are used, but do not share this format, they do not convey formal information in the RFC 2119 sense, and are merely explanatory, i.e., informative. As much as possible, such usages are avoided in this specification.</p>
	<p>Informative sections provide information useful to understanding the specification. Such sections may contain examples of recommended practice, but it is not required to follow such recommendations in order to conform to this specification.</p>
</section>
<section id="mapping_additional_nd" class="normative">
  <h2>Name and Description</h2>
  <p>This section is <a class="termref">normative</a>.</p>
  <section id="mapping_additional_nd_name">
    <h3>Name Computation</h3>
    <p><a class="termref" title="user agent">User agents</a> MUST compute an <a class="termref">accessible name</a> using the rules outlined below in the section titled <a href="#mapping_additional_nd_te">Text Alternative Computation</a>.</p>
    <p><abbr title="Hypertext Markup Language">Special Case</abbr>: If the <a class="termref">element</a> is an <code>img</code> element that is exposed in the accessibility tree; and the computed text alternative is empty, then check for the presence of <a class="termref">role</a> <a class="role-reference" href="#presentation"><code>presentation</code></a> or any labeling attribute that specifies an empty label, specifically <a class="property-reference" href="#aria-label"><code>aria-label</code></a>, <a class="property-reference" href="#aria-labelledby"><code>aria-labelledby</code></a>, <code>alt</code> or <code>title</code>. The presence of any of these indicates the author's intention to indicate that the <code>img</code> is decorative or redundant. In this case, the user agent MUST set the name to an empty string. If none of these <a class="termref" title="attribute">attributes</a> are present, this indicates the author simply did not provide an accessible label for the image, and the implementation MUST return an  accessible name of NULL instead of an empty string if the <abbr title="Application Programming Interface">API</abbr> supports it. This hints to the assistive technology to do its  own heuristic processing to repair the missing accessible name.</p>
  </section>
  <section id="mapping_additional_nd_description">
    <h3>Description Computation</h3>
    <p>If <a class="property-reference" href="#aria-describedby"><code>aria-describedby</code></a> is present, <a class="termref" title="user agent">user agents</a> MUST compute the accessible description by  							concatenating the text alternatives for nodes referenced by an  							<code>aria-describedby</code> attribute on the current node. The  							text alternatives for the referenced nodes are computed using a  							number of methods, outlined below in the section titled <a href="#mapping_additional_nd_te">Text Alternative Computation</a>. </p>
  </section>
  <section id="mapping_additional_nd_te">
    <h3>Text Alternative Computation</h3>
    <p>The text alternative is reused in both the name and description computation, as described above. There are different rules provided for several different types of nodes and combinations of markup. Text alternatives are built up, when appropriate, from all the relevant content contained within an <a class="termref">element</a>. This is accomplished via rule 2C (which is recursive), using the full set of rules to retrieve text from its own children.</p>
    <p>The text alternative for a given node is computed as follows:</p>
    <ol>
      <li>Skip <a class="termref">hidden</a> elements unless the author specifies to use them via an <code>aria-labelledby</code> or <code>aria-describedby</code> being used in the current computation. By default, users of <a class="termref">assistive technologies</a> won't receive the hidden information, but an author will be able to explicitly override that and include the hidden text alternative as part of the label string sent to the <a class="termref">accessibility <abbr title="Application Programming Interface">API</abbr></a>.</li>
      <li>For any non-skipped elements:
        <ol>
          <li>Authors specify an element's text alternative in content <a class="termref" title="attribute">attributes</a>, used in this order of preference:
            <ul>
              <li>The <code>aria-labelledby</code> attribute takes precedence as the element's text alternative unless this computation is already occurring as the result of a recursive <code>aria-labelledby</code> declaration (in other words, <code>aria-labelledby</code> is not recursive when referenced from another element, so it will not cause loops). However, the element's <code>aria-labelledby</code> attribute can reference the element's own IDREF in order to concatenate a string provided by the element's <code>aria-label</code> attribute or another feature lower in this preference list. The text alternatives for all the elements referenced will be computed using this same set of rules. <a class="termref" title="user agent">User agents</a> will then trim whitespace and join the substrings using a single space character. Substrings will be joined in the order specified by the author (IDREF order in the <code>aria-labelledby</code> attribute).
                <p>In the following example, the <code>&lt;span&gt;</code> elements would have text alternatives of "Delete Documentation.pdf" and "Delete HolidayLetter.pdf", respectively.</p>
                <p><code>&lt;h1&gt;Files&lt;/h1&gt;<br />
  &lt;ul&gt;<br />
  &lt;li&gt;<br />
  &lt;a id=&quot;file_row1&quot; href=&quot;./files/Documentation.pdf&quot;&gt;Documentation.pdf&lt;/a&gt;<br />
  &lt;span role=&quot;button&quot; tabindex=&quot;0&quot; id=&quot;del_row1&quot; aria-label=&quot;Delete&quot; aria-labelledby=&quot;del_row1 file_row1&quot;&gt;&lt;/span&gt;<br />
  &lt;/li&gt;<br />
  &lt;li&gt;<br />
  &lt;a id=&quot;file_row2&quot; href=&quot;./files/HolidayLetter.pdf&quot;&gt;HolidayLetter.pdf&lt;/a&gt;<br />
  &lt;span role=&quot;button&quot; tabindex=&quot;0&quot; id=&quot;del_row2&quot; aria-label=&quot;Delete&quot; aria-labelledby=&quot;del_row2 file_row2&quot;&gt;&lt;/span&gt;<br />
  &lt;/li&gt;<br />
  &lt;/ul&gt;</code></p>
                  </li>
                  <li>If <code>aria-labelledby</code> is empty or undefined, the <code>aria-label</code> attribute, which defines an explicit text string, is used. However, if this computation is already occurring as the result of a recursive text alternative computation <strong>and</strong> the current element is an embedded control as defined in rule 2B, ignore the <code>aria-label</code> attribute and skip directly to rule 2B.</li>
                  <li>If <code>aria-labelledby</code> and <code>aria-label</code> are both empty or undefined, and if the element is not marked as presentational (<code>role=&quot;<a class="role-reference" href="#presentation">presentation</a>&quot;</code>, check for the presence of an equivalent host language attribute or element for associating a label, and use those mechanisms to determine a text alternative. For example, in <abbr title="Hypertext Markup Language">HTML</abbr>, the <code>img</code> element's <code>alt</code> attribute defines a label string and the <code>label</code> element references the form element it labels.  </li>
                </ul>
                <p class="note">See <cite><a href="http://www.w3.org/TR/REC-html40/struct/objects.html#h-13.8">How to Specify Alternate Text</a></cite> ([[HTML401]], section 13.8) and 
                  <abbr title="Hypertext Markup Language 5">HTML5</abbr> <cite><a href="http://www.w3.org/TR/2010/WD-html5-20100624/embedded-content-1.html#alt">Requirements for providing text to act as an alternative for images</a></cite> ([[HTML5]], section 4.8.1.1). 
                  In the case of <abbr title="Hypertext Markup Language">HTML</abbr> <code>frame</code> and <code>iframe</code> elements, the <code>title</code> element in the <code>head</code> element of the document inside a <code>frame</code> or <code>iframe</code> is used in this step of the calculation of the name of the <code>frame</code> or <code>iframe</code>.
                </p>
                <p class="ednote">Editorial Note: We've asked the <abbr title="Hypertext Markup Language 5">HTML5</abbr> WG to remove or reduce this section, so we may remove the reference to it.</p>
              </li>
              <li>Authors sometimes embed a control within the label of another <a class="termref">widget</a>, where the user can adjust the embedded control's <a class="termref">value</a>. For example, consider a check box label that contains a text input field: "Flash the screen [input] times". If the user has entered "5" for the embedded text input, the complete label is "Flash the screen 5 times". For such cases, include the value of the embedded control as part of the text alternative in the following manner:
    						<ul>
                  <li>If the embedded control is a text field, use its value.</li>
                  <li>If the embedded control is a menu, use the text alternative of the chosen menu item.</li>
                  <li>If the embedded control is a select or combobox, use the chosen option.</li>
                  <li>If the embedded control is a range (e.g. a <code>spinbutton</code> or <code>slider</code>), use the value of the <code>aria-valuetext</code> attribute if available, or otherwise the value of the <code>aria-valuenow</code> attribute.</li>
                </ul>
              </li>
              <li>Otherwise, if the attributes checked in rules A and B didn't provide results, text is collected from descendant content if the current element's <a class="termref">role</a> allows "Name From: contents." The text alternatives for child nodes will be concatenated, using this same set of rules. This same rule may apply to a child, which means the computation becomes recursive and can result in text being collected in all the nodes in this subtree, no matter how deep they are. However, any given descendant subtree may instead collect their part of the text alternative from the preferred markup described in A and B above. These author-specified attributes are assumed to provide the correct text alternative for the entire subtree. All in all, the node rules are applied consistently as text alternatives are collected from descendants, and each containing element in those descendants may or may not allow their contents to be used. Each node in the subtree is consulted only once. If text has been collected from a child node, and is referenced by another IDREF in some descendant node, then that second, or subsequent, reference is not followed. This is done to avoid infinite loops.</li>
              <li>The last resort is to use text from a tooltip attribute (such as the <code>title</code> attribute in <abbr title="Hypertext Markup Language">HTML</abbr>). This is used only if nothing else, including subtree content, has provided results.</li>
            </ol>
          </li>
          <li>Text nodes are often visited because they are children of an element that uses rule 2C to collect text from its children. However, because it is possible to specify textual content using <abbr title="Cascading Style Sheets">CSS</abbr> rules, it is necessary for user agents to combine such content, as appropriate, with the text referenced by the text nodes to produce a complete text alternative. An example is the use of <abbr title="Cascading Style Sheets">CSS</abbr> <code>:before</code> and <code>:after</code> pseudo-elements, where the user agent combines the textual content specified in the style sheet with that given in the DOM.
            <ul>
              <li>When an image replaces text, then the UA should use the original text, since that text is presumably the equivalent.</li>
              <li>When text replaces an image, then the UA should provide that text.</li>
              <li>When new text replaces old, then the UA should include the new text, since that is what is rendered on screen.</li>
            </ul>
          </li>
        </ol>
        <p>The purpose of the flat text alternative string is to create a <a class="termref">perceivable</a> label in alternative presentations. At each step of the algorithm, an implementation will trim the existing text alternative string and the string to be added, then join those two strings with a single space. For example, a space character may be inserted between the text of two elements used one after the other in a description.</p>
    </section>
	</section>
<section id="glossary">
  <h2>Important Terms</h2>
  <p>This section is <a class="termref">normative</a>.</p>
  <div data-include="../common/terms.html" data-oninclude="fixIncludes"></div>
</section>
<section>
  <h2>Appendices</h2>
  <div data-include='../common/acknowledgements.html' data-include-replace='true'></div>
</section>
</body>
</html>

